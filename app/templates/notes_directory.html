{% extends "home_blank.html"%}

<title>My Notes</title>

{% block content %}
    <div id="app-container">
        <h1>Large Label</h1>
    
        <div id="main-container">

            <div id="sidebar" class="column">
                <div class=hotbar>
                    <b>My Notes</b>
                </div>

                <a href="#all" id="full-directory-folder" class="pill-box folder folder-link" onclick="showAllNotes(); showNotesDir()">
                    All Notes
                </a>

                {% for folder in folders %}
                    <a href="#{{ folder.folder_name }}" class="pill-box folder folder-link" onclick="showFolderNotes('{{ folder.folder_id }}'); showNotesDir()" data-folder-id="{{ folder.folder_id }}">
                        {{ folder.folder_name }}
                    </a>
                {% endfor %}

            </div>
        

            <div id="notes-directory" class="column">
                <div class=hotbar>

                    <select id="sort-by-button" class="pill-box hotbar-button">
                            <option value="date-edited">Date Edited</option>
                            <option value="date-created">Date Created</option>
                            <option value="title">Title</option>
                    </select>

                </div>
                
                {% for note in notes %}
                    <a class="pill-box note" data-folder-id="{{ note.folder_id }}" style="display: none;">
                        {{ note.note_content.splitlines()[0] }}
                    </a>
                {% endfor %}
            </div>
        

            <div id="main-content">
                <div class=hotbar>
                    *buttons*
                </div>

                <div id="current-note">
                    
                </div>

            </div>
        
        </div>  
    </div> 

    
    <script>
        var allNotes = document.querySelectorAll('.pill-box.note');
        var notesArray = Array.from(allNotes);

        function showNotesDir() {
            var notesDir = document.querySelector('#notes-directory'); 
            notesDir.style.display = 'block'; 
        }

        function showAllNotes() {
            allNotes.forEach(function (note) {
                note.style.display = 'block';
            });
        }

        function showFolderNotes(link) {
            allNotes.forEach(function (note) {
                note.style.display = 'block';
            });

            var excludedNotes = document.querySelectorAll('.pill-box.note:not([data-folder-id="' + link + '"])');
            excludedNotes.forEach(function (note) { 
                note.style.display = 'none';
            });
        }

        function handleHashChange() {
        var hash = window.location.hash;

        if (hash.startsWith("#Folder-")) {
            var folderId = hash.substring("#Folder-".length);
            showFolderNotes(folderId);
        } else {
            showAllNotes();
        }
}

        window.onhashchange = handleHashChange;

        handleHashChange();

    </script>
{% endblock %}

<!--STOP-->
<!--STOP2-->